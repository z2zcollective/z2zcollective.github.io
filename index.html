<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>z2z</title>
		<link rel="icon" type="image/png" href="src/favicon.png">
		<style>
			html, body {
				margin: 0;
				padding: 0;
			}
		
			body {
				background-color: black;
				color: white;
				font-family: Arial, Helvetica, sans-serif;
			}
			
			header {
				position: sticky; /* clé pour rendre le header sticky */
				top: 0;           /* reste en haut */
				background-color: black;
				z-index: 1000;    /* pour rester au-dessus du contenu */
				box-shadow: 0px 20px 20px black;
				padding: 20px 30vw;
			}
			
			@media (max-width: 768px) {
				header {
					padding: 20px 10vw;
				}
			}

			/* Navbar centrée */
			.navbar {
				display: flex;
				justify-content: center;
				gap: 20px;
				padding: 20px 0 0 0; /* 20px en haut, 0 en bas et à gauche/droite */
			}

			/* Style des liens */
			.navbar a {
				color: white;
				text-decoration: none;
				font-size: 1.1em;
				padding: 5px 10px;
				flex: 1;
				text-align: center;   /* centre le texte multi-lignes */
				display: inline-block; /* nécessaire pour que text-align fonctionne sur le lien */
				background-color: #61BDC1;
			}

			/* Lien actif souligné */
			.navbar a.active {
				text-decoration: underline;
				background-color: #1A9EA0;
			}

			@media (min-width: 769px) {
				.navbar a:hover {
					background-color: #90D0D3;   /* couleur hover */
				}
			}

			main {
				display: flex;           /* active flexbox */
				justify-content: center; /* centre horizontalement */
				margin-top: 25px;
			}
			
			ul {
				list-style: none; /* supprime les puces */
				padding: 0;  /* optionnel : supprime le retrait par défaut */
				text-align: center;
				margin: 0px 20px 20px 20px;
			}
			
			ul li:not(:first-child) {
				margin-top: 15px;
			}
			
			.listen {
				color: inherit;           /* reprend la couleur du parent */
				text-decoration: none;    /* supprime le soulignement */
				font-weight: normal;
				background-color: #1A9EA0;
				padding: 0.2em;
				border-radius: 10%;
			}
		
			canvas {
				width: 15vw;
				height: auto;
				display: block;
				margin: auto;
			}

			@media (max-width: 768px) {
				canvas {
					width: 50vw;
				}
			}

			.content {
				display: none;
			}

			.content.visible {
				display: block;
			}

			#submit {
				padding: 0 20vw;
			}

			@media (max-width: 768px) {
				#submit {
					padding: 0 10vw;
				}
			}

			/* Mise en page du formulaire */
form {
  max-width: 400px;
  margin: 20px auto;
  padding: 10px;
}

.form-group {
  display: flex;
  flex-direction: column;
  margin-top: 5px;
  margin-bottom: 25px;
}

label {
  margin-bottom: 5px;
  font-weight: bold;
}

input[type="text"] {
  padding: 8px;
  border: 1px solid #ccc;
  border-radius: 4px;
}

/* Toggle switch */
.toggle-group {
  flex-direction: row;
  align-items: center;
}

.switch {
  position: relative;
  display: inline-block;
  width: 50px;
  height: 28px;
}

.switch input {
  opacity: 0;
  width: 0;
  height: 0;
}

.slider {
  position: absolute;
  cursor: pointer;
  top: 0; left: 0;
  right: 0; bottom: 0;
  background-color: #ccc;
  transition: 0.3s;
  border-radius: 28px;
}

.slider:before {
  position: absolute;
  content: "";
  height: 22px;
  width: 22px;
  left: 3px;
  bottom: 3px;
  background-color: white;
  border-radius: 50%;
  transition: 0.3s;
}

input:checked + .slider {
  background-color: #1A9EA0; /* couleur active */
}

input:checked + .slider:before {
  transform: translateX(22px);
}

		</style>
	</head>
	<body>
		<header>
			<canvas id="waveCanvas"></canvas>
			<nav class="navbar">
				<a href="#submitted" class="nav-link active">SONS DÉJÀ PROPOSÉS</a>
				<a href="#submit" class="nav-link">PROPOSER UN SON</a>
			</nav>
		</header>
		
		<main>
			<div id="submitted" class="content visible">
				<ul>
					<li>Flores (Meera (NO) Remix) - Emanuel Satie & Maga&nbsp;&nbsp;<a href="/" class="listen">🎧</a></li>
					<li>Malive, Gogoia, Morgado feat. Gabriel Paes- Quintal (Emanuel Satie, Tim Engelhardt Remix)&nbsp;&nbsp;<a href="/" class="listen">🎧</a></li>
					<li>NOOD (FR) - Solarmor&nbsp;&nbsp;<a href="/" class="listen">🎧</a></li>
					<li>I Adore You (A-Clark & VINNY Remix) [feat. Daecolm]&nbsp;&nbsp;<a href="/" class="listen">🎧</a></li>
					<li>Olof Dreier - Rossa Rugosa (Francisco Garcia Remix)&nbsp;&nbsp;<a href="/" class="listen">🎧</a></li>
					<li>Dennis Louvra, Lilya Mandre - Paradis (Extended Mix)&nbsp;&nbsp;<a href="/" class="listen">🎧</a></li>
					<li>Mussulo (unfazed Remix)&nbsp;&nbsp;<a href="/" class="listen">🎧</a></li>
					<li>Addicted to You (Mont Rouge Remix)&nbsp;&nbsp;<a href="/" class="listen">🎧</a></li>
					<li>Flashing Lights (Deco (BE) & PAEDE Remix)&nbsp;&nbsp;<a href="/" class="listen">🎧</a></li>
					<li>Flores (Meera (NO) Remix) - Emanuel Satie & Maga&nbsp;&nbsp;<a href="/" class="listen">🎧</a></li>
					<li>Malive, Gogoia, Morgado feat. Gabriel Paes- Quintal (Emanuel Satie, Tim Engelhardt Remix)&nbsp;&nbsp;<a href="/" class="listen">🎧</a></li>
					<li>NOOD (FR) - Solarmor&nbsp;&nbsp;<a href="/" class="listen">🎧</a></li>
					<li>I Adore You (A-Clark & VINNY Remix) [feat. Daecolm]&nbsp;&nbsp;<a href="/" class="listen">🎧</a></li>
					<li>Olof Dreier - Rossa Rugosa (Francisco Garcia Remix)&nbsp;&nbsp;<a href="/" class="listen">🎧</a></li>
					<li>Dennis Louvra, Lilya Mandre - Paradis (Extended Mix)&nbsp;&nbsp;<a href="/" class="listen">🎧</a></li>
					<li>Mussulo (unfazed Remix)&nbsp;&nbsp;<a href="/" class="listen">🎧</a></li>
					<li>Addicted to You (Mont Rouge Remix)&nbsp;&nbsp;<a href="/" class="listen">🎧</a></li>
					<li>Flashing Lights (Deco (BE) & PAEDE Remix)&nbsp;&nbsp;<a href="/" class="listen">🎧</a></li>
					<li>Malive, Gogoia, Morgado feat. Gabriel Paes- Quintal (Emanuel Satie, Tim Engelhardt Remix)&nbsp;&nbsp;<a href="/" class="listen">🎧</a></li>
					<li>NOOD (FR) - Solarmor&nbsp;&nbsp;<a href="/" class="listen">🎧</a></li>
					<li>I Adore You (A-Clark & VINNY Remix) [feat. Daecolm]&nbsp;&nbsp;<a href="/" class="listen">🎧</a></li>
					<li>Olof Dreier - Rossa Rugosa (Francisco Garcia Remix)&nbsp;&nbsp;<a href="/" class="listen">🎧</a></li>
					<li>Dennis Louvra, Lilya Mandre - Paradis (Extended Mix)&nbsp;&nbsp;<a href="/" class="listen">🎧</a></li>
					<li>Mussulo (unfazed Remix)&nbsp;&nbsp;<a href="/" class="listen">🎧</a></li>
					<li>Addicted to You (Mont Rouge Remix)&nbsp;&nbsp;<a href="/" class="listen">🎧</a></li>
					<li>Flashing Lights (Deco (BE) & PAEDE Remix)&nbsp;&nbsp;<a href="/" class="listen">🎧</a></li>
				</ul>
			</div>

			<div id="submit" class="content">
				<p>
					<b>Concept :</b>
					On va construire un set d'environ 1h avec les sons qui nous sont suggérés, et on le postera sur nos réseaux.
					Hésite pas à proposer le maximum de sons, on fera au mieux pour les intégrer dans le set.<br>
				</p>

				<form id="myForm">
  <div class="form-group">
    <label for="message">Nom ou lien de ton son :</label>
    <input type="text" id="message" name="message" placeholder="SoundCloud, Youtube, Spotify, ..." required>
  </div>

  <div class="form-group">
    <label for="instagram">Ton @ sur Insta (suis-nous !):</label>
    <input type="text" id="instagram" name="instagram">
  </div>

  <label for="identifier" class="toggle-label">
      On t'identifie lors de la publication Instagram ?
    </label>
  <div class="form-group toggle-group">
    <label class="switch">
      <input type="checkbox" id="identifier" name="identifier">
      <span class="slider"></span>
    </label>
	<span class="toggle-text">&nbsp;&nbsp;Non</span>
  </div>

  <button type="submit">Envoyer</button>
</form>

<p id="status"></p>

			</div>
		</main>
		
		<script>
			const canvas = document.getElementById("waveCanvas");
			const ctx = canvas.getContext("2d");
			const img = new Image();
			img.src = "src/logo.png";

			img.onload = function() {
				canvas.width = img.width;
				canvas.height = img.height;
				let t = 0;

				function draw() {
					ctx.clearRect(0, 0, canvas.width, canvas.height);
					for (let x = 0; x < img.width; x++) {
						let offset = Math.sin((x / 200) + t) * 20;
						ctx.drawImage(img, x, 0, 1, img.height, x, offset, 1, img.height);
					}
					t += 0.05;
					requestAnimationFrame(draw);
				}
				draw();
			};
		</script>

		<script>
			const links = document.querySelectorAll('.nav-link');
const contents = document.querySelectorAll('.content');

function showSectionFromHash() {
  let hash = window.location.hash || "#submitted"; // par défaut
  // Supprimer "active" de tous les liens
  links.forEach(l => l.classList.remove('active'));
  // Cacher tout le contenu
  contents.forEach(c => c.classList.remove('visible'));
  // Trouver le lien et la section correspondants
  const activeLink = document.querySelector(`.nav-link[href="${hash}"]`);
  const activeContent = document.querySelector(hash);
  if (activeLink && activeContent) {
    activeLink.classList.add('active');
    activeContent.classList.add('visible');
  }
}

// Quand on clique sur un lien
links.forEach(link => {
  link.addEventListener('click', e => {
    // le hash change, donc on laisse faire, mais on met à jour l'affichage
    showSectionFromHash();
  });
});

// Quand on charge la page (ou si on change le hash manuellement)
window.addEventListener('load', showSectionFromHash);
window.addEventListener('hashchange', showSectionFromHash);
		</script>

		<script>
			const scriptURL = "https://script.google.com/macros/s/AKfycbw0fcxgSkuVUWhspMbBAslPYBVCxIrZyjc2K5ALXOIeN-Gq0no214azDIniVUVP21HG/exec";
			const form = document.getElementById("myForm");
			const status = document.getElementById("status");

			form.addEventListener("submit", e => {
				e.preventDefault();
				
				const data = {
					message: form.message.value,
					instagram: form.instagram.value
				};

				fetch(scriptURL, {
					method: "POST",
					body: JSON.stringify(data)
				})
				.then(res => res.json())
				.then(response => {
					status.textContent = "✅ Données enregistrées !";
					form.reset();
				})
				.catch(err => {
					console.error("Erreur :", err);
					status.textContent = "❌ Erreur lors de l’envoi";
				});
			});
		</script>
	</body>
</html>
